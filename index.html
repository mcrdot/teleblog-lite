<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TeleBlog Lite - Telegram Blogging Platform</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="screen active">
        <div class="loading-container">
            <div class="loading-spinner"></div>
            <h2>TeleBlog Lite</h2>
            <p>Loading your blogging experience...</p>
        </div>
    </div>

    <!-- Auth Screen - User Type Selection -->
    <div id="auth-screen" class="screen hidden">
        <div class="auth-container">
            <h2>Welcome to TeleBlog Lite! üëã</h2>
            <p>Choose how you'll use our platform:</p>
            
            <div class="user-type-options">
                <button class="user-type-btn" data-type="general">
                    <div class="icon">üë§</div>
                    <h3>General User</h3>
                    <p>Read articles, write posts, engage with community</p>
                </button>
                
                <button class="user-type-btn" data-type="group_admin">
                    <div class="icon">üë•</div>
                    <h3>Group Admin</h3>
                    <p>Manage group content, share with members</p>
                </button>
                
                <button class="user-type-btn" data-type="channel_admin">
                    <div class="icon">üì¢</div>
                    <h3>Channel Admin</h3>
                    <p>Broadcast content, grow your audience</p>
                </button>
            </div>
            
            <p class="note">You can change this later in settings</p>
        </div>
    </div>

    <!-- Main App Screen -->
    <div id="main-app" class="screen hidden">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <h1>TeleBlog Lite</h1>
                <div class="user-menu">
                    <span id="user-greeting">Welcome!</span>
                    <button id="menu-btn">‚ò∞</button>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="app-nav">
            <button class="nav-btn active" data-view="home">üè† Home</button>
            <button class="nav-btn" data-view="posts">üìö Posts</button>
            <button class="nav-btn" data-view="create">‚úçÔ∏è Create</button>
            <button class="nav-btn" data-view="profile">üë§ Profile</button>
        </nav>

        <!-- Main Content -->
        <main class="app-main">

            <!-- Home View -->
    <!-- Replace JUST the home-view section in your index.html -->
<div id="home-view" class="view active">
    <div class="welcome-banner">
        <h2>Welcome to TeleBlog Lite! üéâ</h2>
        <p>Your personal blogging space in Telegram. Share stories, connect with community, and express yourself freely!</p>
    </div>
    
    <div class="scroll-indicator">
        <span>üëá Scroll down to explore amazing content!</span>
    </div>
    
    <div class="quick-stats">
        <div class="stat-card">
            <h3>üìä Live Posts</h3>
            <p id="today-posts">0</p>
        </div>
        <div class="stat-card">
            <h3>üë• Community</h3>
            <p id="active-users">New</p>
        </div>
    </div>

    <div class="featured-posts">
        <h3>üî• Trending Now</h3>
        <div id="featured-posts-container">
            <!-- Posts will load here automatically -->
        </div>
    </div>
    
    <!-- Add a friendly footer -->
    <div class="app-footer">
        <p>üí´ Start your blogging journey today!</p>
    </div>
</div>

            <!-- Posts View -->
            <div id="posts-view" class="view">
                <div class="view-header">
                    <h2>üìö All Posts</h2>
                    <div class="view-controls">
                        <select id="posts-filter">
                            <option value="latest">Latest</option>
                            <option value="popular">Popular</option>
                            <option value="featured">Featured</option>
                        </select>
                    </div>
                </div>
                <div id="posts-container">
                    <!-- Posts will be loaded here -->
                </div>
            </div>

            <!-- Create Post View -->
            <div id="create-view" class="view">
                <div class="create-container">
                    <h2>‚úçÔ∏è Create New Post</h2>
                    <form id="post-form">
                        <div class="form-group">
                            <label for="post-title">Title *</label>
                            <input type="text" id="post-title" placeholder="Give your post a title..." required>
                        </div>
                        
                        <div class="form-group">
                            <label for="post-content">Content *</label>
                            <textarea id="post-content" placeholder="Share your thoughts..." required maxlength="4000"></textarea>
                            <div class="char-count">
                                <span id="char-count">0</span>/4000 characters
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="post-tags">Tags (Optional)</label>
                            <input type="text" id="post-tags" placeholder="technology, blogging, tips...">
                            <small>Separate tags with commas</small>
                        </div>

                        <div class="form-actions">
                            <button type="button" id="draft-btn">Save Draft</button>
                            <button type="submit" id="publish-btn">Publish Post</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Profile View -->
            <div id="profile-view" class="view">
                <div class="profile-container">
                    <div class="profile-header">
                        <div class="avatar">
                            <span id="profile-avatar">üë§</span>
                        </div>
                        <div class="profile-info">
                            <h2 id="profile-name">Loading...</h2>
                            <p id="profile-type">User Type: Loading...</p>
                            <p id="profile-stats">Posts: Loading...</p>
                        </div>
                    </div>

                    <div class="profile-actions">
                        <button class="profile-btn" id="edit-profile-btn">Edit Profile</button>
                        <button class="profile-btn" id="change-type-btn">Change User Type</button>
                        <button class="profile-btn" id="my-posts-btn">My Posts</button>
                        <button class="profile-btn" id="settings-btn">Settings</button>
                    </div>

                    <div class="profile-stats">
                        <h3>Your Stats</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-number" id="total-posts">0</span>
                                <span class="stat-label">Posts</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="published-posts">0</span>
                                <span class="stat-label">Published</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="draft-posts">0</span>
                                <span class="stat-label">Drafts</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="scripts/telegram-webapp.js"></script>
    <script src="scripts/supabase-client.js"></script>
    <script src="app.js"></script>
</body>
</html>